<!-- views/partials/header.ejs -->

<!-- header for navbar -->
<div class="container-fluid above-nav bg-warning m-0">
  <div class="text-center m-0">
    <h3 class="m-0">
      SFSU Software Engineering Project CSC 648-848, Fall 2019. For
      Demonstration Only
    </h3>
  </div>
</div>

<!-- Nav bar with responsive toggle -->

<nav class="navbar navbar-expand-lg  navbar-light">
  <span id="logobtn">
    <button
      class="navbar-toggler bg-warning"
      data-toggle="collapse"
      data-target="#navbarCollapse"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <a href="/" class="navbar-brand"><strong>CSC648</strong></a>
  </span>

  <div class="searchDiv">
      <!-- seach bar --> 
      <form class="form-inline search" action="">
          
        <div class="dropdown">
           
          <select name="category" aria-setsize="1" value="<%= searchCategory %>">
            <div class=" dropdown-menu" aria-labelledby="dropdownMenuButton">
              <option class="dropdown-item" value="All" <% if (searchCategory == 'All') {%>selected<%}%>>All</option>
              <% for (var i = 0; i < categoriesList.length; i++) { %>
              <option class="dropdown-item" value="<%= categoriesList[i].name %>" <% if (searchCategory == categoriesList[i].name) {%>selected<%}%>
                ><%= categoriesList[i].name %></option
              >
              <% } %>
            </div>
          </select>
        </div>
    
        <input
          id="search"
          name="search"
          class="form-control"
          type="text"
          value="<%= searchTerm %>"
          placeholder="Search"
        />
        
        <button id="searchbtn" class="btn bg-warning" type="submit">Search</button>
      </form>
    </div>


    <div class="">
  <div class="collapse navbar-collapse" id="navbarCollapse">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a href="./" class="nav-link">SELL</a>
      </li>
      <li class="nav-item">
        <a href="/about" target="_blank" class="nav-link" >TEAM</a>
      </li>
      <li class="nav-item">
        <a href="#login" role="button" data-toggle="modal" style="border: 2px solid #ffc107; border-radius: 5px;"  class="nav-link ">LOGIN<span style="color: #ffc107">/</span>SIGNUP</a>
      </li>
      <!-- <li class="nav-item">
        <a href="#" class="nav-link">SIGNUP</a>
      </li> -->
    </ul>
  </div>
</div>

</nav>

</div>

<!--  When the user clicks on the button,
toggle between hiding and showing the dropdown content -->
<script>
  var anchors = document.getElementsByTagName("option");

  for (var i = 0, len = anchors.length; i < len; i++) {
    var thisAnchor = anchors[i];
    thisAnchor.onclick = function() {
      var btn = this.parentNode.parentNode.getElementsByTagName("button")[0];
      btn.innerHTML = this.innerHTML;
    };
  }
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js">
  $(document).ready(function() {
    $("#searchbtn").click(function(e) {
      e.preventDefault();
      $.ajax({
        type: "GET",
        url: "/search",
        data: {
          search: $("input[name=search]").val(),
          category: $("select[name=category]").val()
        },
        success: function(result) {
          console.log("success");
        }
      })
    })
  })
</script>

<% include ../partials/login %>